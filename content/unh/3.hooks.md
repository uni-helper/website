---
title: 自定义Hooks
description: 通过自定义hooks扩展unh功能，实现项目启动前后自定义逻辑
navTruncate: false
icon: carbon:webhook

badges:
  - value: npm
    to: https://www.npmjs.com/package/@uni-helper/unh
    target: _blank
  - value: source
    icon: lucide:code
    to: https://github.com/uni-helper/unh
    target: _blank
---

`@uni-helper/unh` 提供了强大的自定义hooks系统，允许开发者在项目启动前后执行自定义逻辑，实现更灵活的工作流程定制。

## 基本配置

在 `unh.config.ts` 中配置自定义hooks：

```ts [unh.config.ts]
import { defineConfig } from '@uni-helper/unh'

export default defineConfig({
  // 准备阶段配置，可以自定义hooks
  hooks: {
    // 安装依赖时的hooks
    prepare() {
      console.log('prepare')
    },
    // 开发前的hooks，接收平台参数
    dev({ platform, options, envData }) {
      console.log('dev:', platform, options, envData)
    },
    // 构建前的hooks，接收平台参数
    build({ platform, options, envData }) {
      console.log('build:', platform, options, envData)
    },
    // 构建后的hooks，接收平台参数
    onBuildAfter({ platform, options, envData }) {
      console.log('buildAfter:', platform, options, envData)
    },
  },
})
```

## 参数类型
::field-group
	::field{name="prepare" type="() => void | Promise<void>"}
	安装依赖时执行，执行`unh prepare`时调用
	::

	::field{name="build" type="(params: HookParams) => void | Promise<void>"}
	构建前执行，执行`unh build`时调用
	::

	::field{name="dev" type="(params: HookParams) => void | Promise<void>"}
	开发前执行，执行`unh dev`时调用
	::

	::field{name="onBuildAfter" type="(params: HookParams) => void | Promise<void>"}
	构建后执行，执行`unh build`后调用
	::

```ts
interface HookParams {
  platform: string // 目标平台
  options: Record<string, any> // 命令行选项
  envData: Record<string, any> // 环境数据
}
```
::
