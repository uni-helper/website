---
title: 环境变量配置
description: 根据当前编译平台及模式提前加载对应的环境变量并生成类型声明文件
navTruncate: false
icon: lucide:chevrons-left-right-ellipsis

badges:
  - value: npm
    to: https://www.npmjs.com/package/@uni-helper/unh
    target: _blank
  - value: source
    icon: lucide:code
    to: https://github.com/uni-helper/unh
    target: _blank
---

`@uni-helper/unh` 提供了环境变量配置功能，可以根据当前编译平台及模式提前加载对应的环境变量并生成类型声明文件，提升开发体验和代码安全性。

## 基本配置

在 `unh.config.ts` 中配置环境变量选项：

```ts [unh.config.ts]
import { defineConfig } from '@uni-helper/unh'

export default defineConfig({
  // 环境变量配置
  env: true, // 启用环境变量配置
})
```

## 配置选项

### `env`
::field{name="env" type="boolean | EnvOptions" defaultValue="false"}
是否启用环境变量配置
- `true` 启用默认配置
- 对象形式可配置更多选项
::

### `root`
::field{name="root" type="string" defaultValue="项目根目录"}
环境变量文件根目录，默认为项目根目录
::

### `usePlatformDir`
::field{name="usePlatformDir" type="boolean" defaultValue="false"}
是否使用平台名称当作子目录
- 假设 `root` 为 `envs`，开启该参数后，则环境变量文件路径：`envs/mp-weixin/.env`、`envs/h5/.env`...
::

### `prefixes`
::field{name="prefixes" type="string[]" defaultValue="['VITE_', 'UNI_']"}
筛选需加载的环境变量名前缀，默认为 `['VITE_', 'UNI_']`
::

### `intoProcess`
::field{name="intoProcess" type="boolean" defaultValue="true"}
是否将加载的环境变量合并至 `process.env` 中
::

### `dts`
::field{name="dts" type="boolean | string" defaultValue="'uni-env.d.ts'"}
是否生成类型声明文件
- `false` 不生成类型声明文件
- `string` 指定类型声明文件名
::

## 高级配置示例

```ts [unh.config.ts]
import { defineConfig } from '@uni-helper/unh'

export default defineConfig({
  env: {
    // 环境变量文件根目录
    root: 'envs',
    // 使用平台名称当作子目录
    usePlatformDir: true,
    // 自定义环境变量前缀
    prefixes: ['VITE_', 'UNI_', 'APP_'],
    // 将加载的环境变量合并至 process.env 中
    intoProcess: true,
    // 生成类型声明文件
    dts: 'types/env.d.ts',
  },
})
```
