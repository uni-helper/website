---
title: 自动生成配置
description: 配置自动生成 pages.json 和 manifest.json 文件
navTruncate: false
icon: carbon:document-add

badges:
  - value: npm
    to: https://www.npmjs.com/package/@uni-helper/unh
    target: _blank
  - value: source
    icon: lucide:code
    to: https://github.com/uni-helper/unh
    target: _blank
---

`@uni-helper/unh` 提供了自动生成配置功能，可以在项目启动前自动生成 `pages.json` 和 `manifest.json` 文件，解决使用 [vite-plugin-uni-pages](/vite-plugin-uni-pages) 和 [vite-plugin-uni-manifest](/vite-plugin-uni-manifest) 等插件时的文件依赖问题。

## 基本配置

在 `unh.config.ts` 中配置自动生成选项：

```ts [unh.config.ts]
import { defineConfig } from '@uni-helper/unh'

export default defineConfig({
  // 自动生成配置
  autoGenerate: {
    // 输出目录，默认为 'src'
    outDir: 'src',
    // 是否自动生成 pages.json
    pages: true,
    // 是否自动生成 manifest.json
    manifest: true,
  },
})
```

## 配置选项

### `outDir`
::field{name="outDir" type="string" defaultValue="'src'"}
自动生成的文件输出目录
::

### `pages`
::field{name="pages" type="boolean | BuildPhase[]" defaultValue="false"}
是否自动生成 pages.json
- `true` 在所有阶段自动生成 pages.json
- `BuildPhase[]` 指定在哪些阶段生成，如 `['build', 'dev']`
::

### `manifest`
::field{name="manifest" type="boolean | ManifestOptions & { commands?: BuildPhase[] }" defaultValue="false"}
是否自动生成 manifest.json
- `true` 在所有阶段自动生成 manifest.json
- 对象形式可配置更多选项
::

#### ManifestOptions
::field{name="minify" type="boolean" defaultValue="false"}
是否压缩 `manifest.json`
::

::field{name="insertFinalNewline" type="boolean" defaultValue="false"}
是否在 `manifest.json` 末尾插入换行符
::

::field{name="commands" type="BuildPhase[]"}
指定在哪些命令阶段生成 manifest.json
::

## 高级配置示例

```ts [unh.config.ts]
import { defineConfig } from '@uni-helper/unh'

export default defineConfig({
  autoGenerate: {
    outDir: 'src',
    // 只在 dev 和 build 阶段生成 pages.json
    pages: ['dev', 'build'],
    // 配置 manifest.json 的高级选项
    manifest: {
      minify: true,
      insertFinalNewline: true,
      commands: ['build'], // 只在 build 阶段生成
    },
  },
})
```
