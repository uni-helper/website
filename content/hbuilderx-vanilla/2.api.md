---
title: API æ¥å£
description: HBuilderX Vanilla æä¾›çš„ REST API æ¥å£æ–‡æ¡£
icon: ant-design:api-outlined

navTruncate: false

badges:
  - value: docker
    icon: simple-icons:docker
    to: https://hub.docker.com/r/flymyd114/hbuilderx-vanilla
    target: _blank
  - value: source
    icon: lucide:code
    to: https://github.com/uni-helper/hbuilderx-vanilla
    target: _blank
---

HBuilderX Vanilla é€šè¿‡ç®€æ´çš„ REST API æä¾›æ„å»ºæœåŠ¡ï¼Œæ‰€æœ‰æ¥å£å‡åŸºäº HTTP GET è¯·æ±‚ã€‚

## åŸºç¡€ä¿¡æ¯

- **åŸºç¡€ URL**: `http://localhost:13300`ï¼ˆé»˜è®¤ç«¯å£ï¼‰
- **è¯·æ±‚æ–¹å¼**: GET
- **å“åº”æ ¼å¼**: JSON

## æ¥å£åˆ—è¡¨

### å¥åº·æ£€æŸ¥

æ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€ã€‚

```bash
GET /
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "status": "ok",
  "message": "HBuilderX Vanilla API is running",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### æ„å»ºé¡¹ç›®

æ„å»ºæŒ‡å®šé¡¹ç›®çš„ wgt çƒ­æ›´æ–°åŒ…ã€‚

```bash
GET /build?project=<project_name>&vueVersion=<version>
```

**è¯·æ±‚å‚æ•°ï¼š**

| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `project` | string | âœ… | - | é¡¹ç›®æ–‡ä»¶å¤¹åç§° |
| `vueVersion` | string | âŒ | `3` | Vue ç‰ˆæœ¬ï¼Œå¯é€‰å€¼ï¼š`2` æˆ– `3` |

**è¯·æ±‚ç¤ºä¾‹ï¼š**

```bash
# æ„å»ºVue3é¡¹ç›®
curl "http://localhost:13300/build?project=my-app&vueVersion=3"

# æ„å»ºVue2é¡¹ç›®
curl "http://localhost:13300/build?project=legacy-app&vueVersion=2"

# ä½¿ç”¨é»˜è®¤Vueç‰ˆæœ¬ï¼ˆ3ï¼‰
curl "http://localhost:13300/build?project=my-app"
```

## ä½¿ç”¨ç¤ºä¾‹

### Shell è„šæœ¬

```bash
#!/bin/bash

# é…ç½®
API_BASE="http://localhost:13300"
PROJECT_NAME="my-uni-app"
VUE_VERSION="3"

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
echo "æ£€æŸ¥æœåŠ¡çŠ¶æ€..."
response=$(curl -s "$API_BASE/")
if [[ $? -eq 0 ]]; then
    echo "âœ… æœåŠ¡è¿è¡Œæ­£å¸¸"
else
    echo "âŒ æœåŠ¡ä¸å¯ç”¨"
    exit 1
fi

# æ„å»ºé¡¹ç›®
echo "å¼€å§‹æ„å»ºé¡¹ç›®: $PROJECT_NAME"
response=$(curl -s "$API_BASE/build?project=$PROJECT_NAME&vueVersion=$VUE_VERSION")

# è§£æå“åº”
status=$(echo $response | jq -r '.status')
if [[ "$status" == "success" ]]; then
    echo "âœ… æ„å»ºæˆåŠŸ"
    output_path=$(echo $response | jq -r '.data.outputPath')
    echo "ğŸ“¦ è¾“å‡ºè·¯å¾„: $output_path"
else
    echo "âŒ æ„å»ºå¤±è´¥"
    error_message=$(echo $response | jq -r '.message')
    echo "é”™è¯¯ä¿¡æ¯: $error_message"
    exit 1
fi
```

### Python è„šæœ¬

```python
import requests
import json

class HBuilderXVanillaClient:
    def __init__(self, base_url="http://localhost:13300"):
        self.base_url = base_url
    
    def health_check(self):
        """æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€"""
        try:
            response = requests.get(f"{self.base_url}/")
            return response.json()
        except Exception as e:
            return {"status": "error", "message": str(e)}
    
    def build_project(self, project_name, vue_version="3"):
        """æ„å»ºé¡¹ç›®"""
        params = {
            "project": project_name,
            "vueVersion": vue_version
        }
        
        try:
            response = requests.get(f"{self.base_url}/build", params=params)
            return response.json()
        except Exception as e:
            return {"status": "error", "message": str(e)}

# ä½¿ç”¨ç¤ºä¾‹
client = HBuilderXVanillaClient()

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
health = client.health_check()
print(f"æœåŠ¡çŠ¶æ€ï¼š{health['status']}")

# æ„å»ºé¡¹ç›®
result = client.build_project("my-app", "3")
if result["status"] == "success":
    print(f"âœ… æ„å»ºæˆåŠŸï¼š{result['data']['outputPath']}")
else:
    print(f"âŒ æ„å»ºå¤±è´¥ï¼š{result['message']}")
```

### Node.js è„šæœ¬

```javascript
const axios = require('axios');

class HBuilderXVanillaClient {
  constructor(baseUrl = 'http://localhost:13300') {
    this.baseUrl = baseUrl;
  }

  async healthCheck() {
    try {
      const response = await axios.get(`${this.baseUrl}/`);
      return response.data;
    } catch (error) {
      return { status: 'error', message: error.message };
    }
  }

  async buildProject(projectName, vueVersion = '3') {
    try {
      const response = await axios.get(`${this.baseUrl}/build`, {
        params: {
          project: projectName,
          vueVersion: vueVersion
        }
      });
      return response.data;
    } catch (error) {
      return { status: 'error', message: error.message };
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
(async () => {
  const client = new HBuilderXVanillaClient();
  
  // æ£€æŸ¥æœåŠ¡çŠ¶æ€
  const health = await client.healthCheck();
  console.log(`æœåŠ¡çŠ¶æ€ï¼š${health.status}`);
  
  // æ„å»ºé¡¹ç›®
  const result = await client.buildProject('my-app', '3');
  if (result.status === 'success') {
    console.log(`âœ… æ„å»ºæˆåŠŸï¼š${result.data.outputPath}`);
  } else {
    console.log(`âŒ æ„å»ºå¤±è´¥ï¼š${result.message}`);
  }
})();
```

## æœ€ä½³å®è·µ

### 1. è¶…æ—¶è®¾ç½®

æ„å»ºè¿‡ç¨‹å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå»ºè®®è®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´ï¼š

```bash
# è®¾ç½®60ç§’è¶…æ—¶
curl --max-time 60 "$API_BASE/build?project=$PROJECT"
```

### 2. å¹¶å‘æ§åˆ¶

é¿å…åŒæ—¶æ„å»ºå¤šä¸ªé¡¹ç›®ï¼Œè¿™å¯èƒ½å¯¼è‡´èµ„æºç«äº‰å’Œæ„å»ºå¤±è´¥ã€‚

### 3. æ—¥å¿—è®°å½•

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®è®°å½•æ‰€æœ‰ API è°ƒç”¨å’Œå“åº”ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ï¼š

```bash
echo "[$(date)] å¼€å§‹æ„å»ºé¡¹ç›®: $PROJECT" >> build.log
response=$(curl -s "$API_BASE/build?project=$PROJECT")
echo "[$(date)] æ„å»ºå“åº”: $response" >> build.log
```
