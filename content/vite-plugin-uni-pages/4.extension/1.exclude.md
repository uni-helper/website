---
title: 排除页面
description: 通过 onAfterScanPages 钩子对扫描的页面进行过滤
navTruncate: false
icon: ph:exclude-square-thin
---

## 配置

::code-group
```js [vite.config.js]
import UniPages from '@uni-helper/vite-plugin-uni-pages'
import { defineConfig } from 'vite'
import { scanPageFilter } from './builds/util.js'

export default defineConfig({
  plugins: [
    UniPages({
      onAfterScanPages: (ctx) => {
        // 扫描页面后进行过滤
        scanPageFilter(ctx, 'pages')
        scanPageFilter(ctx, 'subPages')
      },
    })
  ],
})
```

```js [util.js]
export function scanPageFilter(ctx, inKey) {
  if (!(inKey in ctx)) return
  // 自行实现你喜欢的规则，示例仅供参考
  const keysToRemove = []
  for (const key of ctx[inKey].keys()) {
    // 只有以 .page.vue 结尾的页面会被保留
    if (!key.endsWith('.page.vue')) {
      keysToRemove.push(key)
    }
  }
  keysToRemove.forEach((key) => {
    ctx[inKey].delete(key)
  })
}
```
::
